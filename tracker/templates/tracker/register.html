{% extends 'tracker/layout.html' %}

{% block content %}
    <div class="container register-container">
        <form method="POST">
            {% csrf_token %}
            <div class="form-group">
                <h3 class="text-center">Register</h3>
                <div class="my-4">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <div class="alert alert-danger">
                                {{ error|escape }}
                            </div>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <div class="alert alert-danger">
                            {{ error|escape }}
                        </div>
                    {% endfor %}
                </div>
                <div class="form-group">
                    <label for="id_username">
                        {{ form.username.label }}
                    </label>
                    {{ form.username }}
                </div>
                <div class="form-group">
                    <label for="id_email">
                        {{ form.email.label }}
                    </label>
                    {{ form.email }}
                </div>
                <div class="form-group">
                    <label for="id_password1">
                        {{ form.password1.label }}
                    </label>
                    {{ form.password1 }}
                </div>
                <div class="form-group">
                    <label for="id_password2">
                        {{ form.password2.label }}
                    </label>
                    {{ form.password2 }}
                </div>
            </div>
            <div class="form-group text-center">
                <button class="btn btn-outline-info">Register</button>
            </div>
        </form>
        <div class="border-top pt-3">
            <small class="text-muted">
                Already have an account? <a href="{% url 'tracker:login_request' %}" class="ml-2">Login</a>
            </small>
        </div>
    </div>

    <script>
        // Add classes to labels and inputs
        labels = document.querySelectorAll('label');
        labels.forEach(label => label.classList.add('form-control-label'));
        inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            if (input.id === 'id_password1') {
                input.placeholder = 'Enter password';
            } else if (input.id === 'id_password2') {
                input.placeholder = 'Confirm password';
            }
            input.classList.add('form-control', 'form-control-lg');
        })
    </script>
{% endblock content %}